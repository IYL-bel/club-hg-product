{% extends 'ApplicationAdminBundle::layout.html.twig' %}


{% block content %}

<div class="cabinet_content__item-content">

    <table width="100%">

        {% for key, comment in commentsProduct %}

            <tr{% if loop.index % 2 != 0 %} class="odd"{% endif %}>

                <td>
                    <span>{{ comment.createdAt.format('d.m.Y') }}</span>
                </td>
                <td>
                    {{ comment.nameProduct }}
                </td>
                <td>
                    <a href="{{ path('application_admin_reviews_more', {'id': comment.id}) }}">Подробнее</a>
                </td>
                <td>
                    <div class="item-content">

                        {% if comment.isStatusNew() %}
                            <b class="status_assay"></b>
                            <span>Отзыв не проверен</span>
                        {% endif %}

                        {% if comment.isStatusConfirmed() %}
                            <b class="status_approved"><i class="fa fa-check"></i></b>
                            <span>+{{ comment.score.points }} очков</span>
                        {% endif %}

                        {% if comment.isStatusRejected() %}
                            <b class="status_disallow"><i class="fa fa-times"></i></b>
                            <span>{{ comment.commentAdmin }}</span>
                        {% endif %}

                    </div>
                </td>
                <td>
                    <div class="item-content">

                        {% if comment.isStatusNew() %}
                            <a href="{{ path('application_admin_reviews_approved', {'id': comment.id}) }}" class="but-blue-approved button">
                                <b class="status_approved"><i class="fa fa-check"></i></b>Принять
                            </a>
                            <a href="{{ path('application_admin_reviews_disallow', {'id': comment.id}) }}" class="but-red-disallow button">
                                <b class="status_disallow"><i class="fa fa-times"></i></b>Отклонить
                            </a>
                        {% endif %}

                        {% if comment.isStatusConfirmed() %}
                            Подтверждён {{ comment.processingAt.format('d.m.Y') }}
                        {% endif %}

                        {% if comment.isStatusRejected() %}
                            Отклонён {{ comment.processingAt.format('d.m.Y') }}
                        {% endif %}

                    </div>
                </td>

            </tr>

        {% else %}

            <tr>
                <td colspan="3">
                    <div style="text-align: center;">
                        Список отзывов пуст
                    </div>
                </td>
            </tr>

        {% endfor %}

    </table>

</div>

{% endblock content %}
